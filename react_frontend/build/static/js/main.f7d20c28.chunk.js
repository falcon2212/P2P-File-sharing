(this.webpackJsonpreact_frontend=this.webpackJsonpreact_frontend||[]).push([[0],{104:function(e,t,n){},134:function(e,t){},138:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(25),c=n.n(i),o=n(39),r=n(8),l=n(9),d=n(41),h=n(11),j=n(10),u=n(7),b=(n(23),n(149)),m=n(151),O=n(89),p=n(147),f=n(14),x=(n(104),n(1)),v=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return this.props.login_data.logged_in?Object(x.jsxs)(b.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top",children:[Object(x.jsx)(f.LinkContainer,{to:"/",children:Object(x.jsx)(b.a.Brand,{children:"P2P"})}),Object(x.jsx)(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(b.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsxs)(m.a,{defaultActiveKey:"home",className:"mr-auto",children:[Object(x.jsx)(f.LinkContainer,{to:"/",children:Object(x.jsx)(m.a.Link,{eventKey:"home",children:"Home"})}),Object(x.jsx)(f.LinkContainer,{to:"/about",children:Object(x.jsx)(m.a.Link,{eventKey:"about",children:"About"})}),Object(x.jsx)(f.LinkContainer,{to:"/authors",children:Object(x.jsx)(m.a.Link,{eventKey:"authors",children:"Authors"})}),Object(x.jsx)(f.LinkContainer,{to:"/dashboard",children:Object(x.jsx)(m.a.Link,{eventKey:"dashboard",children:"Dashboard"})})]}),Object(x.jsx)(m.a,{fill:!0,className:"justify-content-end",children:Object(x.jsxs)(p.a,{eventKey:1,id:"basic-nav-dropdown",drop:"down",title:this.props.login_data.login_credentials.username,children:[Object(x.jsx)(p.a.Item,{eventKey:1.1,href:"#profile",children:"Profile"}),Object(x.jsx)(p.a.Item,{eventKey:1.2,href:"/",onClick:function(){return e.props.onReq("false",null)},children:"Logout"})]})})]})]}):Object(x.jsxs)(b.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top",children:[Object(x.jsx)(f.LinkContainer,{to:"/",children:Object(x.jsx)(b.a.Brand,{children:"P2P"})}),Object(x.jsx)(b.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(b.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsxs)(m.a,{className:"mr-auto",children:[Object(x.jsx)(f.LinkContainer,{to:"/",children:Object(x.jsx)(m.a.Link,{eventKey:"home",children:"Home"})}),Object(x.jsx)(f.LinkContainer,{to:"/about",children:Object(x.jsx)(m.a.Link,{eventKey:"about",children:"About"})}),Object(x.jsx)(f.LinkContainer,{to:"/authors",children:Object(x.jsx)(m.a.Link,{eventKey:"authors",children:"Authors"})})]}),Object(x.jsxs)(m.a,{fill:!0,className:"justify-content-end",children:[Object(x.jsx)(f.LinkContainer,{to:"/login",children:Object(x.jsx)(O.a,{variant:"outline-primary",children:"Login"})}),Object(x.jsx)(f.LinkContainer,{to:"/sign_up",children:Object(x.jsx)(O.a,{variant:"primary",children:"Sign-up"})})]})]})]})}}]),n}(a.Component),g=n(143),y=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(g.a,{children:[Object(x.jsx)("h1",{children:"P2P file sharing"}),Object(x.jsx)("p",{children:"This is a peer to peer file sharing app, intending to act as a medium to share files amongst personal devices."}),Object(x.jsx)("p",{children:Object(x.jsx)(f.LinkContainer,{to:"/about",children:Object(x.jsx)(O.a,{variant:"info",children:"Learn more"})})})]})}}]),n}(a.Component),C=n(150),k=n(144),_=n(91),L=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsx)(C.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:Object(x.jsxs)(k.a,{children:[Object(x.jsx)(_.a,{sm:3,children:Object(x.jsxs)(m.a,{variant:"pills",className:"flex-column",children:[Object(x.jsx)(m.a.Item,{children:Object(x.jsx)(m.a.Link,{eventKey:"first",children:"Srihari Vemuru"})}),Object(x.jsx)(m.a.Item,{children:Object(x.jsx)(m.a.Link,{eventKey:"second",children:"Sushranth Hebbar"})}),Object(x.jsx)(m.a.Item,{children:Object(x.jsx)(m.a.Link,{eventKey:"third",children:"Mohammad Khalid"})})]})}),Object(x.jsx)(_.a,{sm:9,children:Object(x.jsxs)(C.a.Content,{children:[Object(x.jsxs)(C.a.Pane,{eventKey:"first",children:[Object(x.jsx)("h1",{children:"Role"}),Object(x.jsx)("p1",{children:"Frontend design, integration, network logic"})]}),Object(x.jsxs)(C.a.Pane,{eventKey:"second",children:[Object(x.jsx)("h1",{children:"Role"}),Object(x.jsx)("p1",{children:"Backend, network logic"})]}),Object(x.jsxs)(C.a.Pane,{eventKey:"third",children:[Object(x.jsx)("h1",{children:"Role"}),Object(x.jsx)("p1",{children:"DevOps tools"})]})]})})]})})}}]),n}(a.Component),S=n(152),R=(n(73),n(145)),w=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsx)(C.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:Object(x.jsxs)(k.a,{children:[Object(x.jsx)(_.a,{sm:3,children:Object(x.jsxs)(m.a,{variant:"pills",className:"flex-column",children:[Object(x.jsx)(m.a.Item,{children:Object(x.jsx)(m.a.Link,{eventKey:"first",children:"App"})}),Object(x.jsx)(m.a.Item,{children:Object(x.jsx)(m.a.Link,{eventKey:"second",children:"Tools"})})]})}),Object(x.jsx)(_.a,{sm:9,children:Object(x.jsxs)(C.a.Content,{children:[Object(x.jsx)(C.a.Pane,{eventKey:"first",children:Object(x.jsxs)("p1",{children:["This is a peer to peer file sharing app, intending to act as a medium to share files amongst personal devices",Object(x.jsx)(R.a,{href:"https://github.com/falcon2212/window-drop"})]})}),Object(x.jsxs)(C.a.Pane,{eventKey:"second",children:[Object(x.jsx)("h1",{children:"Frontend"}),Object(x.jsxs)(S.a,{variant:"flush",children:[Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"React.js"})," framework"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"react-bootstrap"})," components"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"socket.io-client"})," for client side event handling"]})]}),Object(x.jsx)("h1",{children:"Backend"}),Object(x.jsxs)(S.a,{variant:"flush",children:[Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"Node.js"}),"+",Object(x.jsx)("b",{children:"Express"})," framework"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"socket.io"})," for event handling over network"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"WebRTC"})," for peer communication"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"Mongoose"})," for user management"]})]}),Object(x.jsx)("h1",{children:"DevOps"}),Object(x.jsxs)(S.a,{variant:"flush",children:[Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"WebStorm"}),", ",Object(x.jsx)("b",{children:"VisualStudio"})," IDEs"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"GitHub Actions"})," for CI/CD"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"Docker"})," for containerization"]}),Object(x.jsxs)(S.a.Item,{children:[Object(x.jsx)("b",{children:"Azure"})," for deploying the app"]})]})]})]})})]})})}}]),n}(a.Component),I=n(24),D=(n(61),n(148)),N=n(38).BACKEND_ENDPOINT,q=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={isLoaded:!1,error:null,username:"",password:"",name:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch(N+"start").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0})})).catch((function(t){e.setState({isLoaded:!0,error:t}),console.log(t)}))}},{key:"handleSubmit",value:function(){var e=this;fetch(N+"users/find",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then((function(e){return e.json()})).then((function(t){null===t?(console.log("Username password do not match"),alert("username password do not match")):""!==t.name&&(console.log(t),e.props.onReq(!0,{username:e.state.username,name:t.name,user_id:t._id,devices:t.devices}),e.props.onRoomChange(t.room),e.setState({name:t.name}))})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(I.a)({},t,n))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoaded,a=t.error,s=(t.username,t.password,t.name);return a?Object(x.jsxs)("div",{children:["Error: ",a.message]}):n?""!==s?Object(x.jsx)(u.c,{to:"/device_select"}):Object(x.jsxs)(D.a,{className:"form-global",children:[Object(x.jsx)("h3",{children:"Login"}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(D.a.Label,{children:"Username"}),Object(x.jsx)(D.a.Control,{type:"text",name:"username",onChange:this.handleChange.bind(this)})]}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicPassword",children:[Object(x.jsx)(D.a.Label,{children:"Password"}),Object(x.jsx)(D.a.Control,{type:"password",name:"password",onChange:this.handleChange.bind(this)})]}),Object(x.jsx)(D.a.Group,{controlId:"formBasicCheckbox",children:Object(x.jsx)(D.a.Check,{type:"checkbox",label:"Remember me"})}),Object(x.jsx)(O.a,{variant:"primary",onClick:function(){return e.handleSubmit()},children:"Submit"})]}):Object(x.jsx)("div",{children:"Loading..."})}}]),n}(a.Component),K=n(146),E=n(38).BACKEND_ENDPOINT,P=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={isLoaded:!1,isSubmitted:!1,error:null,username:"",password:"",name:"",email:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch(E+"start").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0})})).catch((function(t){e.setState({isLoaded:!0,error:t}),console.log(t)}))}},{key:"handleSubmit",value:function(){var e=this;fetch(E+"users/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password,email:this.state.email,name:this.state.name})}).then((function(e){return e.json()})).then((function(t){null===t?(console.log("Username password do not match"),alert("username password do not match")):(console.log(t),e.props.onReq(!0,{username:e.state.username,name:e.state.name,user_id:t._id,devices:[]}),e.props.onRoomChange(t.room),e.setState({isSubmitted:!0}))})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(I.a)({},t,n))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoaded,a=t.isSubmitted,s=t.error;t.username,t.password,t.email;return s?Object(x.jsxs)("div",{children:["Error: ",s.message]}):n?a?Object(x.jsx)(u.c,{to:"/device_select"}):Object(x.jsx)(K.a,{className:"justify-content-center mb-5 mt-5",children:Object(x.jsxs)(D.a,{onSubmit:function(){return e.handleSubmit()},children:[Object(x.jsxs)(D.a.Group,{children:[Object(x.jsx)(D.a.Label,{children:"Username"}),Object(x.jsx)(D.a.Control,{name:"username",placeholder:"For eg, brain_freeze, v-house",onChange:this.handleChange.bind(this)})]}),Object(x.jsxs)(D.a.Row,{children:[Object(x.jsxs)(D.a.Group,{as:_.a,controlId:"formGridEmail",children:[Object(x.jsx)(D.a.Label,{children:"Email"}),Object(x.jsx)(D.a.Control,{name:"email",type:"email",placeholder:"Enter email",onChange:this.handleChange.bind(this)})]}),Object(x.jsxs)(D.a.Group,{as:_.a,controlId:"formGridPassword",children:[Object(x.jsx)(D.a.Label,{children:"Password"}),Object(x.jsx)(D.a.Control,{name:"password",type:"password",placeholder:"Password",onChange:this.handleChange.bind(this)})]})]}),Object(x.jsxs)(D.a.Group,{controlId:"formGridFirstName",children:[Object(x.jsx)(D.a.Label,{children:"First name"}),Object(x.jsx)(D.a.Control,{name:"name",onChange:this.handleChange.bind(this)})]}),Object(x.jsxs)(D.a.Group,{controlId:"formGridSecondName",children:[Object(x.jsx)(D.a.Label,{children:"Second name"}),Object(x.jsx)(D.a.Control,{})]}),Object(x.jsx)(O.a,{variant:"primary",onClick:function(){return e.handleSubmit()},children:"Submit"})]})}):Object(x.jsx)("div",{children:"Loading..."})}}]),n}(a.Component),B=n(32),A=n.n(B),T=n(59),M=n(92),G=n.n(M),U=n(93),F=655350,W=n(137),J=W.arrayBufferWithMime,H=W.arrayBufferMimeDecouple,z=n(86),V=n(38).BACKEND_ENDPOINT,Q=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).tmp=function(e){},a.state={configuration:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},room:null,chunks:[],clientList:[],isInitiator:null,clientId:null,dest_id:null,dataChannel:null,connections:{},datachannels:{},online:null,memberList:[],file:null,socket:null,downloadList:null,usernames:{}},a}return Object(l.a)(n,[{key:"renderClients",value:function(){var e=0===this.state.clientList.length?0:this.state.clientList.length-1;this.setState({online:e});var t=[];if(1!==this.state.clientList.length)for(var n=0;n<this.state.clientList.length;n++){var a=this.state.clientList[n];a!==this.state.clientId&&(t.push(a),this.setState({memberList:t}))}else this.setState({memberList:t})}},{key:"allConnect",value:function(){this.setState({connections:{}}),this.setState({datachannels:{}});for(var e=0;e<this.state.clientList.length;e++){var t=this.state.clientList[e];t!==this.state.clientId&&this.sendConnect(t)}}},{key:"sendConnect",value:function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({dest_id:t}),this.setState({isInitiator:!0}),this.state.socket.emit("sendConnect",this.state.dest_id,this.state.clientId,this.state.room,this.props.login_data.device),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"t",value:function(){console.log(Date.now())}},{key:"createPeer",value:function(e){var t=this,n=this.state.connections,a=this.state.datachannels;n[e]=new RTCPeerConnection(this.state.configuration),n[e].onicecandidate=function(n){n.candidate&&t.sendMessage({type:"candidate",label:n.candidate.sdpMLineIndex,id:n.candidate.sdpMid,candidate:n.candidate.candidate},e)},this.setState({connections:n}),this.state.isInitiator?(a[e]=this.state.connections[e].createDataChannel("files"),a[e].binaryType="arraybuffer",this.setState({datachannels:a}),this.onDataChannelCreated(e),this.state.connections[e].createOffer().then((function(n){return t.state.connections[e].setLocalDescription(n)})).then((function(){t.sendMessage(t.state.connections[e].localDescription,e)})).catch(this.logError)):(n[e].ondatachannel=function(n){a[e]=n.channel,a[e].binaryType="arraybuffer",t.setState({datachannels:a}),t.onDataChannelCreated(e)},this.setState({connections:n}))}},{key:"sendMessage",value:function(e,t){this.state.socket.emit("message",e,t,this.state.clientId)}},{key:"onDataChannelCreated",value:function(e){var t=this,n=this.state.datachannels;n[e].onopen=function(){},n[e].onclose=function(){},n[e].onmessage=function(){var e=Object(T.a)(A.a.mark((function e(n){var a,s,i,c,o,r,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.data;try{"EOF"!==a?((s=t.state.chunks).push(a),t.setState({chunks:s})):(i=t.state.chunks.reduce((function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n}),new Uint8Array),c=H(i),o=c.mime,r=c.arrayBuffer,l=new Blob([r],{type:o}),t.render1(l,"download"))}catch(d){}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setState({datachannels:n})}},{key:"logError",value:function(e){e&&("string"===typeof e?console.warn(e):console.warn(e.toString(),e))}},{key:"render1",value:function(e,t){var n,a=window.URL.createObjectURL(e);n=a?Object(x.jsx)("li",{children:Object(x.jsx)("small",{children:Object(x.jsx)("a",{href:a,download:t,children:"Incoming file"})})}):Object(x.jsx)("li",{children:"No files available here"}),this.setState({downloadList:n}),this.setState({chunks:[]})}},{key:"signalingMessageCallback",value:function(e,t){var n=this;"offer"===e.type?(this.state.connections[t].setRemoteDescription(new RTCSessionDescription(e),(function(){}),this.logError),this.state.connections[t].createAnswer().then((function(e){n.onLocalSessionCreated(e,t)})).catch(this.logError)):"answer"===e.type?this.state.connections[t].setRemoteDescription(new RTCSessionDescription(e),(function(){}),this.logError):"candidate"===e.type&&this.state.connections[t].addIceCandidate(new RTCIceCandidate({candidate:e.candidate,sdpMLineIndex:e.label,sdpMid:e.id}))}},{key:"onLocalSessionCreated",value:function(e,t){var n=this;this.state.connections[t].setLocalDescription(e).then((function(){n.sendMessage(n.state.connections[t].localDescription,t)})).catch(this.logError)}},{key:"sendFile",value:function(){var e=Object(T.a)(A.a.mark((function e(t){var n,a,s,i,c,o,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,!(a=this.state.file)){e.next=11;break}return e.next=5,a.arrayBuffer();case 5:for(s=e.sent,i=a.type,c=J(s,i),o=this.state.datachannels[n],r=0;r<c.byteLength;r+=F)o.send(c.slice(r,r+F));o.send("EOF");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"arrayBufferWithMime",value:function(e,t){var n=t.length,a=new Uint8Array(n+1);a[0]=n;for(var s=0;s<n;s++){var i=t[s].charCodeAt(0);a[s+1]=i}return z(a,e)}},{key:"arrayBufferMimeDecouple",value:function(e){for(var t=new Uint8Array(e),n="",a=t[0],s=0;s<a;s++){var i=t[s+1];n+=String.fromCharCode(i)}return{mime:n,arrayBuffer:t.slice(a+1).buffer}}},{key:"componentDidMount",value:function(){var e=this;console.log(this.props.login_data.room),null!==this.props.login_data.room?this.state.room=window.location.hash=this.props.login_data.room:this.state.room=window.location.hash="1",this.state.socket=G.a.connect(V,{reconnect:!0}),this.state.socket.emit("create or join",this.state.room),this.state.socket.on("Display clients",(function(t,n){e.setState({clientList:t}),e.renderClients(),n&&e.allConnect()})),this.state.socket.on("ready",(function(t,n){var a=e.state.usernames;a[t]=n,e.setState({usernames:a}),e.t(),e.createPeer(t),e.t()})),this.state.socket.on("reset",(function(){window.location.reload()})),this.state.socket.on("sendConnect",(function(t,n){var a=e.state.usernames;return a[t]=n,e.setState({usernames:a}),e.setState({dest_id:t}),e.setState({isInitiator:!1}),e.t(),e.createPeer(e.state.dest_id),e.t(),e.state.socket.emit("ready",e.state.dest_id,e.state.clientId,e.props.login_data.device),!0})),this.state.socket.on("socketid",(function(t){e.setState({clientId:t})})),this.state.socket.on("log",(function(e){})),this.state.socket.on("message",(function(t,n){e.signalingMessageCallback(t,n)}))}},{key:"componentWillUnmount",value:function(){this.state.socket.emit("final_step",this.state.room)}},{key:"addFile",value:function(e){this.setState({file:e.target.files[0]})}},{key:"createUserList",value:function(){for(var e=this,t=[],n=0;n<this.state.memberList.length;n++)t.push(Object(x.jsxs)(S.a.Item,{children:[this.state.usernames[this.state.memberList[n]],Object(x.jsx)(O.a,{value:this.state.memberList[n],onClick:function(t){return e.sendFile(t)},children:"Send file"})]}));return t}},{key:"render",value:function(){var e=this,t=this.createUserList();return Object(x.jsxs)(K.a,{className:"justify-content-center mb-5 mt-5",children:[Object(x.jsxs)("div",{children:["Users online: ",this.state.online]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(U.a,{onChange:function(t){e.addFile(t)},type:"file","data-browse":"Select file"}),Object(x.jsx)("ul",{id:"downloadList",children:this.state.downloadList})]}),Object(x.jsx)(S.a,{children:t})]})}}]),n}(a.Component),X=(n(38).BACKEND_ENDPOINT,function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={room:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.state.room=null}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(I.a)({},t,n)),this.props.onRoomChange(n)}},{key:"render",value:function(){return Object(x.jsxs)(D.a,{className:"form-global",children:[Object(x.jsx)("h3",{children:"Room select"}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicEmail",children:[Object(x.jsx)(D.a.Label,{children:"Room number"}),Object(x.jsx)(D.a.Control,{type:"text",name:"room",onChange:this.handleChange.bind(this)})]}),Object(x.jsx)(f.LinkContainer,{to:"/dashboard",children:Object(x.jsx)(O.a,{variant:"primary",children:"Submit"})})]})}}]),n}(a.Component)),Y=n(38).BACKEND_ENDPOINT,Z=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={device:null,transaction:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.state.device=null}},{key:"handleSubmit",value:function(){var e=this,t=this.props.login_data.login_credentials.devices;t.push(this.state.device),fetch(Y+"users/update_devices/"+this.props.login_data.login_credentials.user_id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({devices:t})}).then((function(e){return e.json()})).then((function(t){null===t?console.log("Some issue"):(console.log(t),e.props.onReq(!0,{username:t.username,name:t.name,user_id:t._id,devices:t.devices}),e.props.onDeviceChange(e.state.device),e.setState({transaction:!0}))})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(I.a)({},t,n))}},{key:"handleSelect",value:function(e){this.props.onDeviceChange(e),this.setState({transaction:!0})}},{key:"render",value:function(){var e,t=this;if(this.state.transaction)return console.log(this.state),Object(x.jsx)(u.c,{to:"/dashboard"});if(0===this.props.login_data.login_credentials.devices.length)e=Object(x.jsx)("div",{className:"form-global",children:Object(x.jsxs)(D.a,{children:[Object(x.jsx)("h3",{children:"New device?"}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicDevice",children:[Object(x.jsx)(D.a.Label,{children:"Device name"}),Object(x.jsx)(D.a.Control,{type:"text",name:"device",onChange:this.handleChange.bind(this)})]}),Object(x.jsx)(O.a,{variant:"primary",onClick:function(){return t.handleSubmit()},children:"Register"})]})});else{for(var n=[],a=0;a<this.props.login_data.login_credentials.devices.length;a++)n.push(Object(x.jsx)(S.a.Item,{eventKey:this.props.login_data.login_credentials.devices[a],children:this.props.login_data.login_credentials.devices[a]}));e=Object(x.jsxs)("div",{className:"form-global",children:[Object(x.jsx)("h3",{children:"Which device is this?"}),Object(x.jsx)(S.a,{onSelect:this.handleSelect.bind(this),children:n}),Object(x.jsxs)(D.a,{children:[Object(x.jsx)("h3",{children:"New device?"}),Object(x.jsxs)(D.a.Group,{controlId:"formBasicDevice",children:[Object(x.jsx)(D.a.Label,{children:"Device name"}),Object(x.jsx)(D.a.Control,{type:"text",name:"device",onChange:this.handleChange.bind(this)})]}),Object(x.jsx)(O.a,{variant:"primary",onClick:function(){return t.handleSubmit()},children:"Register"})]})]})}return e}}]),n}(a.Component),$=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e;return"home"===this.props.middle_content?e=Object(x.jsx)(y,{}):"authors"===this.props.middle_content?e=Object(x.jsx)(L,{}):"about"===this.props.middle_content?e=Object(x.jsx)(w,{}):"login"===this.props.middle_content?e=Object(x.jsx)(q,{onReq:this.props.onReq,onRoomChange:this.props.onRoomChange}):"sign_up"===this.props.middle_content?e=Object(x.jsx)(P,{onReq:this.props.onReq,onRoomChange:this.props.onRoomChange}):"dashboard"===this.props.middle_content?e=Object(x.jsx)(Q,{login_data:this.props.login_data}):"room_select"===this.props.middle_content?e=Object(x.jsx)(X,{onRoomChange:this.props.onRoomChange}):"device_select"===this.props.middle_content&&(e=Object(x.jsx)(Z,{login_data:this.props.login_data,onDeviceChange:this.props.onDeviceChange,onRoomChange:this.props.onRoomChange,onReq:this.props.onReq})),e}}]),n}(a.Component),ee=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={logged_in:!1,login_credentials:{},device:null,room:null},a.handleReq=a.handleReq.bind(Object(d.a)(a)),a.handleRoomChange=a.handleRoomChange.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"handleReq",value:function(e,t){this.setState({logged_in:e,login_credentials:t})}},{key:"handleDeviceChange",value:function(e){this.setState({device:e})}},{key:"handleRoomChange",value:function(e){this.setState({room:e})}},{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{children:Object(x.jsxs)(u.g,{children:[Object(x.jsxs)(u.d,{exact:!0,path:"/",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"home"})]}),Object(x.jsxs)(u.d,{path:"/about",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"about"})]}),Object(x.jsxs)(u.d,{path:"/authors",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"authors"})]}),Object(x.jsxs)(u.d,{path:"/login",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"login",onReq:function(t,n){return e.handleReq(t,n)},onRoomChange:function(t){return e.handleRoomChange(t)}})]}),Object(x.jsxs)(u.d,{path:"/sign_up",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"sign_up",onReq:function(t,n){return e.handleReq(t,n)},onRoomChange:function(t){return e.handleRoomChange(t)}})]}),Object(x.jsxs)(u.d,{path:"/dashboard",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"dashboard",login_data:this.state})]}),Object(x.jsxs)(u.d,{path:"/room_select",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"room_select",onRoomChange:function(t){return e.handleRoomChange(t)}})]}),Object(x.jsxs)(u.d,{path:"/device_select",children:[Object(x.jsx)(v,{login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)}}),Object(x.jsx)($,{middle_content:"device_select",login_data:this.state,onReq:function(t,n){return e.handleReq(t,n)},onDeviceChange:function(t){return e.handleDeviceChange(t)},onRoomChange:function(t){return e.handleRoomChange(t)}})]})]})})}}]),n}(a.Component);a.Component;c.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(o.BrowserRouter,{children:Object(x.jsx)(ee,{})})}),document.getElementById("root"))},38:function(e,t){e.exports={BACKEND_ENDPOINT:"https://backend-service-falcon2212.cloud.okteto.net/"}},61:function(e,t,n){},73:function(e,t,n){}},[[138,1,2]]]);
//# sourceMappingURL=main.f7d20c28.chunk.js.map